import{c as r,o as n,a as e,F as h,r as U,t as s,u as S,b as c,d as x,w as E,e as Q,f as _,g as k,h as C,i as K,j as M,v as A,k as i,l as P,m as j,n as O,p as R}from"./index-CXp7fELa.js";import{L as z}from"./Loading-yle37rj2.js";const G=["onClick"],H=["onClick"],I={__name:"UsersTable",props:{users:{type:Array,required:!0}},emits:["update","delete"],setup(f){return(o,a)=>(n(),r("table",null,[a[0]||(a[0]=e("thead",null,[e("tr",null,[e("th",null,"First name"),e("th",null,"Last name"),e("th",null,"Email"),e("th",null,"Phone number"),e("th",null,"BSN"),e("th",null,"Transfer Limit"),e("th",null,"Update"),e("th",null,"Delete")])],-1)),e("tbody",null,[(n(!0),r(h,null,U(f.users,t=>(n(),r("tr",{key:t.id},[e("td",null,s(t.firstName),1),e("td",null,s(t.lastName),1),e("td",null,s(t.email),1),e("td",null,s(t.phoneNumber),1),e("td",null,s(t.BSN),1),e("td",null,s(t.transferLimit),1),e("td",null,[e("button",{onClick:u=>o.$emit("update",t)},"Update",8,G)]),e("td",null,[e("button",{onClick:u=>o.$emit("delete",t)},"Delete",8,H)])]))),128))])]))}},J=["onClick"],W={__name:"VerificationTable",props:{users:{type:Array,required:!0}},emits:["verify"],setup(f){return(o,a)=>(n(),r("table",null,[a[0]||(a[0]=e("thead",null,[e("tr",null,[e("th",null,"First name"),e("th",null,"Last name"),e("th",null,"Email"),e("th",null,"Phone number"),e("th",null,"BSN"),e("th",null,"Transfer Limit"),e("th",null,"Verify")])],-1)),e("tbody",null,[(n(!0),r(h,null,U(f.users,t=>(n(),r("tr",{key:t.id},[e("td",null,s(t.firstName),1),e("td",null,s(t.lastName),1),e("td",null,s(t.email),1),e("td",null,s(t.phoneNumber),1),e("td",null,s(t.BSN),1),e("td",null,s(t.transferLimit),1),e("td",null,[e("button",{onClick:u=>o.$emit("verify",t)},"Verify",8,J)])]))),128))])]))}},X=["disabled"],Y={style:{margin:"1em 0"}},Z=["disabled"],ee={key:0},te={key:1},le={key:3},ne={key:5},ue={__name:"UserContainer",setup(f){const o=S(),a=c(!1),t=c(!1);c(null);const u=c(!1),y=c(""),v=c(""),p=x();let b;E(y,l=>{clearTimeout(b),b=setTimeout(()=>{v.value=l},400)});const{isLoading:N,isError:T,data:d,error:V}=Q({queryKey:["users",v],queryFn:()=>j(v.value?{search:v.value}:{})});_({mutationFn:l=>O(l.id),onSuccess:()=>{o.invalidateQueries({queryKey:["users"]}),u.value=!1}});const $=_({mutationFn:l=>R(l),onSuccess:()=>{o.invalidateQueries({queryKey:["users"]})}});function g(l){p.push(`/admin/users/form/${l.id}`)}function F(l){confirm(`Delete user ${l.name||l.firstname}?`)&&$.mutate(l.id)}function L(){p.push("/admin/users/form")}function w(){u.value=!0}function B(l){}function D(){u.value=!1}return(l,m)=>(n(),r(h,null,[e("button",{onClick:L},"Create User"),m[2]||(m[2]=e("span",{style:{display:"inline-block",width:"1em"}},null,-1)),e("button",{onClick:w,disabled:a.value||t.value||u.value}," Verify users ",8,X),e("div",Y,[e("label",null,[m[1]||(m[1]=K(" Filter users: ")),M(e("textarea",{"onUpdate:modelValue":m[0]||(m[0]=q=>y.value=q),rows:"2",cols:"40",placeholder:"Type to filter users by any field...",disabled:a.value||t.value||u.value},null,8,Z),[[A,y.value]])])]),i(N)?(n(),r("span",ee,[P(z)])):i(T)?(n(),r("span",te,"Error: "+s(i(V).message),1)):u.value&&i(d)&&i(d).length&&!a.value&&!t.value?(n(),k(W,{key:2,users:i(d),onVerify:B},null,8,["users"])):C("",!0),u.value&&!a.value&&!t.value?(n(),r("div",le,[e("button",{onClick:D,style:{"margin-top":"1em"}},"Close Verification Table")])):i(d)&&i(d).length&&!a.value&&!t.value&&!u.value?(n(),k(I,{key:4,users:i(d),onUpdate:g,onDelete:F},null,8,["users"])):!a.value&&!t.value&&!u.value?(n(),r("div",ne,"No users found!")):C("",!0)],64))}};export{ue as default};

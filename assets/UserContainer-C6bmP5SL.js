import{c as r,o as s,a as e,F as _,r as g,t as l,u as M,b as m,w as Q,d as A,e as P,f as N,g as U,h as V,i as j,j as L,v as O,k as R,l as d,m as z,n as $,p as G,q as H}from"./index-DmIPo0Ok.js";import{L as I}from"./Loading-BhQLOah1.js";const J=["onClick"],W=["onClick"],X={__name:"UsersTable",props:{users:{type:Array,required:!0}},emits:["update","delete"],setup(p){return(v,i)=>(s(),r("table",null,[i[0]||(i[0]=e("thead",null,[e("tr",null,[e("th",null,"First name"),e("th",null,"Last name"),e("th",null,"Email"),e("th",null,"Phone number"),e("th",null,"BSN"),e("th",null,"Transfer Limit"),e("th",null,"Daily Limit"),e("th",null,"Update"),e("th",null,"Delete")])],-1)),e("tbody",null,[(s(!0),r(_,null,g(p.users,t=>(s(),r("tr",{key:t.id},[e("td",null,l(t.firstName),1),e("td",null,l(t.lastName),1),e("td",null,l(t.email),1),e("td",null,l(t.phoneNumber),1),e("td",null,l(t.BSN),1),e("td",null,l(t.transferLimit),1),e("td",null,l(t.dailyLimit??t.transferLimit),1),e("td",null,[e("button",{onClick:u=>v.$emit("update",t)},"Update",8,J)]),e("td",null,[e("button",{onClick:u=>v.$emit("delete",t)},"Delete",8,W)])]))),128))])]))}},Y=["onClick"],Z={__name:"VerificationTable",props:{users:{type:Array,required:!0}},emits:["verify"],setup(p){return(v,i)=>(s(),r("table",null,[i[0]||(i[0]=e("thead",null,[e("tr",null,[e("th",null,"First name"),e("th",null,"Last name"),e("th",null,"Email"),e("th",null,"Phone number"),e("th",null,"BSN"),e("th",null,"Transfer Limit"),e("th",null,"Daily Limit"),e("th",null,"Verify")])],-1)),e("tbody",null,[(s(!0),r(_,null,g(p.users,t=>(s(),r("tr",{key:t.id},[e("td",null,l(t.firstName),1),e("td",null,l(t.lastName),1),e("td",null,l(t.email),1),e("td",null,l(t.phoneNumber),1),e("td",null,l(t.BSN),1),e("td",null,l(t.transferLimit),1),e("td",null,l(t.dailyLimit??t.transferLimit),1),e("td",null,[e("button",{onClick:u=>v.$emit("verify",t)},"Verify",8,Y)])]))),128))])]))}},ee=["disabled"],te={style:{margin:"1em 0"}},le=["disabled"],ne=["type","checked","placeholder","disabled"],ae={key:0},ie={key:1},ue={key:3},se={key:5},de={__name:"UserContainer",setup(p){const v=M(),i=m(!1),t=m(!1);m(null);const u=m(!1),o=m("email"),f=m(""),b=m("email"),h=m("");let C;Q([o,f],([n,a])=>{clearTimeout(C),C=setTimeout(()=>{b.value=n,h.value=a},400)});const{isLoading:T,isError:D,data:c,error:F}=A({queryKey:["users",b,h],queryFn:()=>h.value?$({[b.value]:h.value}):$()}),k=P();N({mutationFn:n=>G(n.id),onSuccess:()=>{v.invalidateQueries({queryKey:["users"]}),u.value=!1}});const q=N({mutationFn:n=>H(n),onSuccess:()=>{v.invalidateQueries({queryKey:["users"]})}});function B(n){k.push({path:`/admin/users/form/${n.id}`})}function S(n){confirm(`Delete user ${n.name||n.firstname}?`)&&q.mutate(n.id)}function w(){k.push("/admin/users/form")}function E(){u.value=!0}function K(n){k.push({path:`/admin/users/form/${n.id}`,query:{verify:"1"}})}function x(){u.value=!1}return(n,a)=>(s(),r(_,null,[e("button",{onClick:w},"Create User"),a[5]||(a[5]=e("span",{style:{display:"inline-block",width:"1em"}},null,-1)),e("button",{onClick:E,disabled:i.value||t.value||u.value}," Verify users ",8,ee),e("div",te,[e("label",null,[a[4]||(a[4]=j(" Filter users: ")),L(e("select",{"onUpdate:modelValue":a[0]||(a[0]=y=>o.value=y),disabled:i.value||t.value||u.value},a[3]||(a[3]=[e("option",{value:"email"},"Email",-1),e("option",{value:"firstName"},"First Name",-1),e("option",{value:"lastName"},"Last Name",-1)]),8,le),[[O,o.value]]),L(e("input",{"onUpdate:modelValue":a[1]||(a[1]=y=>f.value=y),type:o.value==="active"||o.value==="verified"?"checkbox":"text",checked:o.value==="active"||o.value==="verified"?f.value:void 0,onChange:a[2]||(a[2]=y=>o.value==="active"||o.value==="verified"?f.value=y.target.checked:null),placeholder:`Type to filter by ${o.value}...`,disabled:i.value||t.value||u.value,style:{"margin-left":"0.5em"}},null,40,ne),[[R,f.value]])])]),d(T)?(s(),r("span",ae,[z(I)])):d(D)?(s(),r("span",ie,"Error: "+l(d(F).message),1)):u.value&&d(c)&&d(c).length&&!i.value&&!t.value?(s(),U(Z,{key:2,users:d(c),onVerify:K},null,8,["users"])):V("",!0),u.value&&!i.value&&!t.value?(s(),r("div",ue,[e("button",{onClick:x,style:{"margin-top":"1em"}},"Close Verification Table")])):d(c)&&d(c).length&&!i.value&&!t.value&&!u.value?(s(),U(X,{key:4,users:d(c),onUpdate:B,onDelete:S},null,8,["users"])):!i.value&&!t.value&&!u.value?(s(),r("div",se,"No users found!")):V("",!0)],64))}};export{de as default};
